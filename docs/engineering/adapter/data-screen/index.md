---
createTime: 2022/11/11
tag: 'å·¥ç¨‹åŒ–,é€‚é…'
---
### é€‚é…æ–¹æ¡ˆåˆ†æ

çœ‹äº†ç½‘ä¸Šçš„å„ç§æ–¹æ¡ˆï¼Œç›®å‰å¤§å®¶é‡‡ç”¨çš„å¤§æ¦‚æœ‰ 3 ç§ğŸ‘‡

| æ–¹æ¡ˆ | å®ç°æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
| --- | --- | --- | --- |
| **vm vh** | 1.æŒ‰ç…§è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼Œå°†`px`æŒ‰æ¯”ä¾‹è®¡ç®—è½¬ä¸º`vw`å’Œ`vh` | 1.å¯ä»¥åŠ¨æ€è®¡ç®—å›¾è¡¨çš„å®½é«˜ï¼Œå­—ä½“ç­‰ï¼Œçµæ´»æ€§è¾ƒé«˜  
2.å½“å±å¹•æ¯”ä¾‹è·Ÿ ui ç¨¿ä¸ä¸€è‡´æ—¶ï¼Œä¸ä¼šå‡ºç°ä¸¤è¾¹ç•™ç™½æƒ…å†µ | 1.æ¯ä¸ªå›¾è¡¨éƒ½éœ€è¦å•ç‹¬åšå­—ä½“ã€é—´è·ã€ä½ç§»çš„é€‚é…ï¼Œæ¯”è¾ƒéº»çƒ¦ |
| **scale** | 1.é€šè¿‡ `scale` å±æ€§ï¼Œæ ¹æ®å±å¹•å¤§å°ï¼Œå¯¹å›¾è¡¨è¿›è¡Œæ•´ä½“çš„ç­‰æ¯”ç¼©æ”¾ | 1.ä»£ç é‡å°‘ï¼Œé€‚é…ç®€å•  
2.ä¸€æ¬¡å¤„ç†åä¸éœ€è¦åœ¨å„ä¸ªå›¾è¡¨ä¸­å†å»å•ç‹¬é€‚é… | 1.å› ä¸ºæ˜¯æ ¹æ® ui ç¨¿ç­‰æ¯”ç¼©æ”¾ï¼Œå½“å¤§å±è·Ÿ ui ç¨¿çš„æ¯”ä¾‹ä¸ä¸€æ ·æ—¶ï¼Œä¼šå‡ºç°å‘¨è¾¹ç•™ç™½æƒ…å†µ  
2.å½“ç¼©æ”¾æ¯”ä¾‹è¿‡å¤§æ—¶å€™ï¼Œå­—ä½“ä¼šæœ‰ä¸€ç‚¹ç‚¹æ¨¡ç³Šï¼Œå°±ä¸€ç‚¹ç‚¹  
3.å½“ç¼©æ”¾æ¯”ä¾‹è¿‡å¤§æ—¶å€™ï¼Œäº‹ä»¶çƒ­åŒºä¼šåç§»ã€‚ |
| **rem + vm vh** | 1.è·å¾— rem çš„åŸºå‡†å€¼  
2.åŠ¨æ€çš„è®¡ç®—`htmlæ ¹å…ƒç´ çš„font-size`  
3.å›¾è¡¨ä¸­é€šè¿‡ vm vh åŠ¨æ€è®¡ç®—å­—ä½“ã€é—´è·ã€ä½ç§»ç­‰ | 1.å¸ƒå±€çš„è‡ªé€‚åº”ä»£ç é‡å°‘ï¼Œé€‚é…ç®€å• | 1.å› ä¸ºæ˜¯æ ¹æ® ui ç¨¿ç­‰æ¯”ç¼©æ”¾ï¼Œå½“å¤§å±è·Ÿ ui ç¨¿çš„æ¯”ä¾‹ä¸ä¸€æ ·æ—¶ï¼Œä¼šå‡ºç°å‘¨è¾¹ç•™ç™½æƒ…å†µ  
2.å›¾è¡¨éœ€è¦å•ä¸ªåšå­—ä½“ã€é—´è·ã€ä½ç§»çš„é€‚é… |

ä»¥ä¸Š 3 ç§æ–¹æ¡ˆåœ¨å®é™…åº”ç”¨ä¸­è¯¥æ€ä¹ˆé€‰æ‹©è§†å…·ä½“æƒ…å†µè€Œå®šï¼Œä¹Ÿæœ‰çœ‹åˆ°å¤§å®¶è¯´è‡ªé€‚åº”åœ¨åœ°å›¾çš„é€‚é…ä¸­ä¼šæœ‰ä¸€äº›å…¼å®¹é—®é¢˜ï¼Œæˆ‘è¿™è¾¹è¿˜æ²¡æœ‰å®è·µè¿‡ã€‚

* å¦‚æœæƒ³ç®€å•ï¼Œå®¢æˆ·èƒ½åŒæ„ç•™ç™½ï¼Œé€‰ç”¨ `scale` å³å¯
* å¦‚æœéœ€è¦å…¼å®¹ä¸åŒæ¯”ä¾‹çš„å¤§å±ï¼Œå¹¶ä¸”æƒ³åœ¨ä¸åŒæ¯”ä¾‹ä¸­éƒ½æœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œå›¾è¡¨å æ»¡å±å¹•ï¼Œç±»ä¼¼äºç§»åŠ¨ç«¯çš„å“åº”å¼ï¼Œå¯ä»¥é‡‡ç”¨ vm vh çš„æ–¹æ¡ˆ
* è‡³äº remï¼Œä¸ªäººè§‰å¾—å°±æ˜¯ scale å’Œ vm vh çš„ç»¼åˆï¼Œæœ€ç»ˆçš„æ•ˆæœè·Ÿ `scale` å·®ä¸å¤š

æ¥ä¸‹æ¥ä»‹ç»ä¸‹ä¸‰ç§æ–¹æ¡ˆçš„å…·ä½“å®ç°ï¼Œæ–¹æ¡ˆä¸­çš„ä»£ç éƒ½ä»¥ vue2.0 å’Œ vue-cli3 æ­å»ºçš„ vue é¡¹ç›®ä¸ºä¾‹ï¼Œå› ä¸ºæ˜¯ demoï¼Œå›¾è¡¨çš„ä¸€äº›ç»†èŠ‚å°±æ²¡æœ‰è¿‡å¤šç»†è‡´çš„è°ƒæ•´äº†

### æ–¹æ¡ˆä¸€ï¼švw vh

#### ä¸Šæ•ˆæœ

![ezgif.com-gif-maker (1).gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06ae40cbdefb4417b34eb00aa3a718bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹åˆšå¥½æ˜¯ 16:9 æ—¶

![vwh02.jpg](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d57353767aff4d8a920e142fb9606127~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹å¤§äº 16:9 æ—¶

![vwh03.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/921953ab6a63442a896324bba43320b1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹å°äº 16:9 æ—¶

![vwh09.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/779df26fb501472ea294178c90b8705a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

#### å®ç°æ€è·¯

æŒ‰ç…§è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼Œå°†`px`æŒ‰æ¯”ä¾‹è®¡ç®—è½¬ä¸º`vw`å’Œ`vh`ï¼Œè½¬æ¢å…¬å¼å¦‚ä¸‹

å‡è®¾è®¾è®¡ç¨¿å°ºå¯¸ä¸º 1920*1080ï¼ˆåšä¹‹å‰ä¸€å®šé—®æ¸…æ¥š ui è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼‰

å³ï¼š
ç½‘é¡µå®½åº¦=1920px
ç½‘é¡µé«˜åº¦=1080px

æˆ‘ä»¬éƒ½çŸ¥é“
ç½‘é¡µå®½åº¦=100vw
ç½‘é¡µå®½åº¦=100vh

æ‰€ä»¥ï¼Œåœ¨ 1920px*1080px çš„å±å¹•åˆ†è¾¨ç‡ä¸‹

1920px = 100vw

1080px = 100vh

è¿™æ ·ä¸€æ¥ï¼Œä»¥ä¸€ä¸ªå®½ 300px å’Œ 200px çš„ div æ¥è¯´ï¼Œå…¶æ‰€å çš„å®½é«˜ï¼Œä»¥ vw å’Œ vh ä¸ºå•ä½ï¼Œè®¡ç®—æ–¹å¼å¦‚ä¸‹:

vwDiv = (300px / 1920px ) *100vw
vhDiv = (200px / 1080px )* 100vh

æ‰€ä»¥ï¼Œå°±åœ¨ 1920*1080 çš„å±å¹•åˆ†è¾¨ç‡ä¸‹ï¼Œè®¡ç®—å‡ºäº†å•ä¸ª div çš„å®½é«˜

å½“å±å¹•æ”¾å¤§æˆ–è€…ç¼©å°æ—¶ï¼Œdiv è¿˜æ˜¯ä»¥ vw å’Œ vh ä½œä¸ºå®½é«˜çš„ï¼Œå°±ä¼šè‡ªåŠ¨é€‚åº”ä¸åŒåˆ†è¾¨ç‡çš„å±å¹•

#### è¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç 

##### css æ–¹æ¡ˆ - sass

util.scss

```scss
// ä½¿ç”¨ scss çš„ math å‡½æ•°ï¼Œhttps://sass-lang.com/documentation/breaking-changes/slash-div
@use "sass:math";

// é»˜è®¤è®¾è®¡ç¨¿çš„å®½åº¦
$designWidth: 1920;
// é»˜è®¤è®¾è®¡ç¨¿çš„é«˜åº¦
$designHeight: 1080;

// px è½¬ä¸º vw çš„å‡½æ•°
@function vw($px) {
  @return math.div($px, $designWidth) * 100vw;
}

// px è½¬ä¸º vh çš„å‡½æ•°
@function vh($px) {
  @return math.div($px, $designHeight) * 100vh;
}

```

**è·¯å¾„é…ç½®**  
åªéœ€åœ¨`vue.config.js`é‡Œé…ç½®ä¸€ä¸‹`utils.scss`çš„è·¯å¾„ï¼Œå°±å¯ä»¥å…¨å±€ä½¿ç”¨äº†

vue.config.js

```js
const path = require("path");

function resolve(dir) {
  return path.join(__dirname, dir);
}

module.exports = {
  publicPath: "",
  configureWebpack: {
    name: "app name",
    resolve: {
      alias: {
        "@": resolve("src"),
      },
    },
  },
  css: {
    // å…¨å±€é…ç½® utils.scsï¼Œè¯¦ç»†é…ç½®å‚è€ƒ vue-cli å®˜ç½‘
    loaderOptions: {
      sass: {
        prependData: `@import "@/styles/utils.scss";`,
      },
    },
  },
};

```

**åœ¨ .vue ä¸­ä½¿ç”¨**

```vue
<template>
    <div class="box">   
    </div>
</template>

<script>
export default{
    name: "Box",
}
</script>

<style lang="scss" scoped="scoped">
/* 
 ç›´æ¥ä½¿ç”¨ vw å’Œ vh å‡½æ•°ï¼Œå°†åƒç´ å€¼ä¼ è¿›å»ï¼Œå¾—åˆ°çš„å°±æ˜¯å…·ä½“çš„ vw vh å•ä½   
 */
.box{
    width: vw(300);
    height: vh(100);
    font-size: vh(16);
    background-color: black;
    margin-left: vw(10);
    margin-top: vh(10);
    border: vh(2) solid red;
}
</style>

```

##### css æ–¹æ¡ˆ - less

utils.less

```less
@charset "utf-8";

// é»˜è®¤è®¾è®¡ç¨¿çš„å®½åº¦
@designWidth: 1920;

// é»˜è®¤è®¾è®¡ç¨¿çš„é«˜åº¦
@designHeight: 1080;

.px2vw(@name, @px) {
  @{name}: (@px / @designWidth) * 100vw;
}

.px2vh(@name, @px) {
  @{name}: (@px / @designHeight) * 100vh;
}

.px2font(@px) {
  font-size: (@px / @designWidth) * 100vw;
}

```

**è·¯å¾„é…ç½®**  
åœ¨`vue.config.js`é‡Œé…ç½®ä¸€ä¸‹`utils.less`

```js
const path = require("path");

function resolve(dir) {
  return path.join(__dirname, dir);
}

module.exports = {
  publicPath: "",
  configureWebpack: {
    name: "app name",
    resolve: {
      alias: {
        "@": resolve("src"),
      },
    },
  },
  css: {
    // å…¨å±€é…ç½®utils.scss
    loaderOptions: {
      less: {
        additionalData: `@import "@/styles/utils.less";`,
      },
    },
  },
};

```

**åœ¨ .vue æ–‡ä»¶ä¸­ä½¿ç”¨**

```vue
<template>
    <div class="box">   
    </div>
</template>

<script>
export default{
    name: "Box",
}
</script>

<style lang="less" scoped="scoped">
/* 
 ç›´æ¥ä½¿ç”¨ vw å’Œ vh å‡½æ•°ï¼Œå°†åƒç´ å€¼ä¼ è¿›å»ï¼Œå¾—åˆ°çš„å°±æ˜¯å…·ä½“çš„ vw vhå•ä½   
 */
.box{
    .px2vw(width, 300);
    .px2vh(height, 100);
    .px2font(16);
    .px2vw(margin-left, 300);
    .px2vh(margin-top, 100);
    background-color: black;
}
</style>

```

##### å®šä¹‰ js æ ·å¼å¤„ç†å‡½æ•°

```js
// å®šä¹‰è®¾è®¡ç¨¿çš„å®½é«˜
const designWidth = 1920;
const designHeight = 1080;

// pxè½¬vw
export const px2vw = (_px) => {
  return (_px * 100.0) / designWidth + 'vw';
};

export const px2vh = (_px) => {
  return (_px * 100.0) / designHeight + 'vh';
};

export const px2font = (_px) => {
  return (_px * 100.0) / designWidth + 'vw';
};

```

##### å±å¹•å˜åŒ–åï¼Œå›¾è¡¨è‡ªåŠ¨è°ƒæ•´

è¿™ç§ä½¿ç”¨æ–¹å¼æœ‰ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯å±å¹•å°ºå¯¸å‘ç”Ÿå˜åŒ–åï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹æ‰èƒ½å®Œæˆè‡ªé€‚åº”è°ƒæ•´

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦åœ¨å„ä¸ªå›¾è¡¨ä¸­ç›‘å¬é¡µé¢å°ºå¯¸å˜åŒ–ï¼Œé‡æ–°è°ƒæ•´å›¾è¡¨ï¼Œåœ¨ vue é¡¹ç›®ä¸­ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©`element-resize-detector`ï¼Œæœ€å¥½å°è£…ä¸ª resize çš„æŒ‡ä»¤ï¼Œåœ¨å„å›¾è¡¨ä¸­å°±åªè¦ä½¿ç”¨è¯¥æŒ‡ä»¤å°±å¯ä»¥äº†ï¼Œæ¯•ç«Ÿä½œä¸ºç¨‹åºå‘˜ï¼Œèƒ½å·æ‡’å°±å·æ‡’

1. å®‰è£… element-resize-detector

> npm install element-resize-detector --save

2. å¼•å…¥å·¥å…·åŒ…åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æˆ–è€…åœ¨å•ç‹¬çš„ js ä¸­ä½¿ç”¨

> import resizeDetector from 'element-resize-detector'

3. å°è£… directive

```js
// directive.js
import * as ECharts from "echarts";
import elementResizeDetectorMaker from "element-resize-detector";
import Vue from "vue";
const HANDLER = "_vue_resize_handler";
function bind(el, binding) {
  el[HANDLER] = binding.value
    ? binding.value
    : () => {
        let chart = ECharts.getInstanceByDom(el);
        if (!chart) {
          return;
        }
        chart.resize();
      };
  // ç›‘å¬ç»‘å®šçš„divå¤§å°å˜åŒ–ï¼Œæ›´æ–° echarts å¤§å°
  elementResizeDetectorMaker().listenTo(el, el[HANDLER]);
}
function unbind(el) {
  // window.removeEventListener("resize", el[HANDLER]);
  elementResizeDetectorMaker().removeListener(el, el[HANDLER]);
  delete el[HANDLER];
}
// è‡ªå®šä¹‰æŒ‡ä»¤ï¼šv-chart-resize ç¤ºä¾‹ï¼šv-chart-resize="fn"
Vue.directive("chart-resize", { bind, unbind });
```

4. main.js ä¸­å¼•å…¥

```js
import '@/directive/directive';
```

5. html ä»£ç 

```vue
<template>
  <div class="linechart">
    <div ref="chart" v-chart-resize class="chart"></div>
  </div>
</template>
```

è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œå›¾è¡¨ä¸­å¦‚æœéœ€è¦ tab åˆ‡æ¢åŠ¨æ€æ›´æ–°å›¾è¡¨æ•°æ®ï¼Œåœ¨æ›´æ–°æ•°æ®æ—¶ä¸€å®šä¸è¦ç”¨ echarts çš„ dispose æ–¹æ³•å…ˆå°†å›¾è¡¨ç§»é™¤ï¼Œå†é‡æ–°ç»˜åˆ¶ï¼Œå› ä¸º resize æŒ‡ä»¤ä¸­æŒ‚è½½åˆ°çš„å›¾è¡¨å®ä¾‹è¿˜æ˜¯æ—§çš„ï¼Œå°±ç›‘å¬ä¸åˆ°æ–°çš„ chart å…ƒç´ çš„ resize äº†ï¼Œæ›´æ–°æ•°æ®åªéœ€è¦ç”¨ chart çš„ setOption æ–¹æ³•é‡æ–°è®¾ç½®é…ç½®é¡¹å³å¯ã€‚

##### å›¾è¡¨å­—ä½“ã€é—´è·ã€ä½ç§»ç­‰å°ºå¯¸è‡ªé€‚åº”

echarts çš„å­—ä½“å¤§å°åªæ”¯æŒå…·ä½“æ•°å€¼ï¼ˆåƒç´ ï¼‰ï¼Œä¸èƒ½ç”¨ç™¾åˆ†æ¯”æˆ–è€… vw ç­‰å°ºå¯¸ï¼Œä¸€èˆ¬å­—ä½“ä¸ä¼šå»åšè‡ªé€‚åº”ï¼Œå½“å®½é«˜æ¯”è·Ÿ ui ç¨¿æ¯”ä¾‹å‡ºå…¥å¤ªå¤§æ—¶ï¼Œä¼šå‡ºç°æ–‡å­—è·Ÿå›¾è¡¨é‡å çš„æƒ…å†µ

![vwh03.jpg](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65eb81b9699b487a80cd98b863e60e9f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?) è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å°è£…ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œæ¥å¤„ç†å›¾è¡¨ä¸­æ–‡å­—è‡ªé€‚åº”äº†ğŸ‘‡

* é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™é‡Œä»¥ä½ çš„è®¾è®¡ç¨¿æ˜¯ 1920\*1080 ä¸ºä¾‹ï¼Œå³ç½‘é¡µå®½åº¦æ˜¯ 1920px (åšä¹‹å‰ä¸€å®šé—®æ¸…æ¥š ui è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼‰

* æŠŠè¿™ä¸ªå‡½æ•°å†™åœ¨ä¸€ä¸ªå•ç‹¬çš„å·¥å…·æ–‡ä»¶`dataUtil.js`é‡Œé¢ï¼Œåœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨

* å…¶åŸç†æ˜¯è®¡ç®—å‡ºå½“å‰å±å¹•å®½åº¦å’Œé»˜è®¤è®¾è®¡å®½åº¦çš„æ¯”å€¼ï¼Œå°†åŸå§‹çš„å°ºå¯¸ä¹˜ä»¥è¯¥å€¼

* å¦å¤–ï¼Œå…¶å®ƒ echarts çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚é—´è·ã€å®šä½ã€è¾¹è·ä¹Ÿå¯ä»¥ç”¨è¯¥å‡½æ•°

1. ç¼–å†™ dataUtil.js å·¥å…·å‡½æ•°

```js
// Echartså›¾è¡¨å­—ä½“ã€é—´è·è‡ªé€‚åº”
export const fitChartSize = (size,defalteWidth = 1920) => {
  let clientWidth = window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
  if (!clientWidth) return size;
  let scale = (clientWidth / defalteWidth);
  return Number((size*scale).toFixed(3));
}
```

2. å°†å‡½æ•°æŒ‚è½½åˆ°åŸå‹ä¸Š

```js
import {fitChartSize} from '@src/utils/dataUtil.js'
Vue.prototype.fitChartFont = fitChartSize;
```

3. è¿™æ ·ä½ å¯ä»¥åœ¨`.vue`æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨`this.fitChartSize()`è°ƒç”¨

```vue
<template>
  <div class="chartsdom" ref="chart" v-chart-resize></div>
</template>

<script>
export default {
  name: "dashboardChart",
  data() {
    return {
      option: null,
    };
  },
  mounted() {
    this.getEchart();
  },
  methods: {
    getEchart() {
      let myChart = this.$echarts.init(this.$refs.chart);
      const option = {
        backgroundColor: "transparent",
        tooltip: {
          trigger: "item",
          formatter: "{a} <br/>{b} : {c}%",
        },
        grid: {
          left: this.fitChartSize(10),
          right: this.fitChartSize(20),
          top: this.fitChartSize(20),
          bottom: this.fitChartSize(10),
          containLabel: true,
        },
        calculable: true,
        series: [
          {
            color: ["#0db1cdcc"],
            name: "è®¡åˆ’æŠ•å…¥",
            type: "funnel",
            width: "45%",
            height: "70%",
            x: "5%",

            minSize: "10%",
            funnelAlign: "right",

            center: ["50%", "50%"], // for pie

            data: [
              {
                value: 30,
                name: "ä¸‹å•30%",
              },
              {
                value: 55,
                name: "å’¨è¯¢55%",
              },
              {
                value: 65,
                name: "ç‚¹å‡»65%",
              },
              {
                value: 60,
                name: "è®¿é—®62%",
              },
              {
                value: 80,
                name: "å±•ç°80%",
              },
            ].sort(function (a, b) {
              return a.value - b.value;
            }),
            roseType: true,
            label: {
              normal: {
                formatter: function () {},
                position: "inside",
              },
            },
            itemStyle: {
              normal: {
                borderWidth: 0,
                shadowBlur: this.fitChartSize(20),
                shadowOffsetX: 0,
                shadowOffsetY: this.fitChartSize(5),
                shadowColor: "rgba(0, 0, 0, 0.3)",
              },
            },
          },

          {
            color: ["#0C66FF"],
            name: "å®é™…æŠ•å…¥",
            type: "funnel",
            width: "45%",
            height: "70%",
            x: "50%",

            minSize: "10%",
            funnelAlign: "left",

            center: ["50%", "50%"], // for pie

            data: [
              {
                value: 35,
                name: "ä¸‹å•35%",
              },
              {
                value: 40,
                name: "å’¨è¯¢40%",
              },
              {
                value: 70,
                name: "è®¿é—®70%",
              },
              {
                value: 90,
                name: "ç‚¹å‡»90%",
              },
              {
                value: 95,
                name: "å±•ç°95%",
              },
            ].sort(function (a, b) {
              return a.value - b.value;
            }),
            roseType: true,
            label: {
              normal: {
                position: "inside",
              },
            },
            itemStyle: {
              normal: {
                borderWidth: 0,
                shadowBlur: this.fitChartSize(20),
                shadowOffsetX: 0,
                shadowOffsetY: this.fitChartSize(5),
                shadowColor: "rgba(0, 0, 0, 0.3)",
              },
            },
          },
        ],
      };
      myChart.setOption(option, true);
    },
  },
  beforeDestroy() {},
};
</script>

<style lang="scss" scoped>
.chartsdom {
  width: 100%;
  height: 100%;
}
</style>

```

### æ–¹æ¡ˆäºŒï¼šscale

é€šè¿‡ css çš„ scale å±æ€§ï¼Œæ ¹æ®å±å¹•å¤§å°ï¼Œå¯¹å›¾è¡¨è¿›è¡Œæ•´ä½“çš„ç­‰æ¯”ç¼©æ”¾ï¼Œä»è€Œè¾¾åˆ°è‡ªé€‚åº”æ•ˆæœ

#### ä¸Šæ•ˆæœ

![sceen-scale.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56f5570596234d8899b564862fce2ccd~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹åˆšå¥½æ˜¯ 16:9 æ—¶ï¼Œé¡µé¢èƒ½åˆšå¥½å…¨å±å±•ç¤ºï¼Œå†…å®¹å æ»¡æ˜¾ç¤ºå™¨

![sceen-demo.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a1e86da017b4cfd9dfe5377001340a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹å°äº 16:9 æ—¶ï¼Œé¡µé¢ä¸Šä¸‹ç•™ç™½ï¼Œå·¦å³å æ»¡å¹¶ä¸Šä¸‹å±…ä¸­ï¼Œæ˜¾ç¤ºæ¯”ä¾‹ä¿æŒ 16:9

![sceen-demo-02.jpg](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5953ad56ba294d4888280ea197d32e74~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•å°ºå¯¸æ¯”ä¾‹å¤§äº 16:9 æ—¶ï¼Œé¡µé¢å·¦å³ç•™ç™½ï¼Œä¸Šä¸‹å æ»¡å¹¶å±…ä¸­ï¼Œæ˜¾ç¤ºæ¯”ä¾‹ä¿æŒ 16:9

![sceen-demo-03.jpg](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0da5c6e9ad0e440abb7d7d4f93e81057~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

#### è¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç 

**html éƒ¨åˆ†**

```html
<div className="screen-wrapper">
    <div className="screen" id="screen">
    </div>
 </div>
```

**js éƒ¨åˆ†**

```js
<script>
export default {
mounted() {
  // åˆå§‹åŒ–è‡ªé€‚åº”  ----åœ¨åˆšæ˜¾ç¤ºçš„æ—¶å€™å°±å¼€å§‹é€‚é…ä¸€æ¬¡
  handleScreenAuto();
  // ç»‘å®šè‡ªé€‚åº”å‡½æ•°   ---é˜²æ­¢æµè§ˆå™¨æ å˜åŒ–åä¸å†é€‚é…
  window.onresize = () => handleScreenAuto();
},
deleted() {
  window.onresize = null;
},
methods: {
  // æ•°æ®å¤§å±è‡ªé€‚åº”å‡½æ•°
  handleScreenAuto() {
    const designDraftWidth = 1920; //è®¾è®¡ç¨¿çš„å®½åº¦
    const designDraftHeight = 960; //è®¾è®¡ç¨¿çš„é«˜åº¦
    // æ ¹æ®å±å¹•çš„å˜åŒ–é€‚é…çš„æ¯”ä¾‹
    const scale =
      document.documentElement.clientWidth /
        document.documentElement.clientHeight <
      designDraftWidth / designDraftHeight
        ? document.documentElement.clientWidth / designDraftWidth
        : document.documentElement.clientHeight / designDraftHeight;
    // ç¼©æ”¾æ¯”ä¾‹
    document.querySelector(
      '#screen',
    ).style.transform = `scale(${scale}) translate(-50%, -50%)`;
  },
},
};
</script>

```

**csséƒ¨åˆ†**

```css
/*
  é™¤äº†è®¾è®¡ç¨¿çš„å®½é«˜æ˜¯æ ¹æ®æ‚¨è‡ªå·±çš„è®¾è®¡ç¨¿å†³å®šä»¥å¤–ï¼Œå…¶ä»–å¤åˆ¶ç²˜è´´å°±å®Œäº‹
*/  
.screen-root {
    height: 100%;
    width: 100%;
    .screen {
        display: inline-block;
        width: 1920px;  //è®¾è®¡ç¨¿çš„å®½åº¦
        height: 960px;  //è®¾è®¡ç¨¿çš„é«˜åº¦
        transform-origin: 0 0;
        position: absolute;
        left: 50%;
        top: -50%;
    }
}

```

#### å®ç°æ€è·¯

**å¦‚ä½•ç¼©æ”¾**

å½“`å±å¹•å®½é«˜æ¯” < è®¾è®¡ç¨¿å®½é«˜æ¯”`ï¼Œæˆ‘ä»¬éœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹æ˜¯`å±å¹•å®½åº¦ / è®¾è®¡ç¨¿å®½åº¦`  
å½“`å±å¹•å®½é«˜æ¯” > è®¾è®¡ç¨¿å®½é«˜æ¯”`ï¼Œæˆ‘ä»¬éœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹æ˜¯`å±å¹•é«˜åº¦ / è®¾è®¡ç¨¿é«˜åº¦`

```js
const scale = document.documentElement.clientWidth / document.documentElement.clientHeight < designDraftWidth / designDraftHeight ?
            (document.documentElement.clientWidth / designDraftWidth) :
            (document.documentElement.clientHeight / designDraftHeight);
```

å¦‚æœæˆ‘ä»¬æ‹¿åˆ°çš„è®¾è®¡ç¨¿å®½é«˜ä¸º: 1920 \* 960 px ï¼Œè€Œæˆ‘ä»¬çš„å±å¹•å¤§å°æ˜¯ 1440 \* 900 pxï¼Œé‚£ä¹ˆ 1440/900 = 1.6ï¼Œ920/960 = 2

å› ä¸º 1.6 < 2 ï¼ˆå½“å‰å±å¹•å®½é«˜æ¯”å°äºè®¾è®¡ç¨¿å®½é«˜æ¯”ï¼‰

æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹æ˜¯ï¼šå±å¹•å®½åº¦é™¤ä»¥è®¾è®¡ç¨¿å®½åº¦ = 1440/1920 = 0.75

**å¦‚ä½•å±…ä¸­**  
é¦–å…ˆæˆ‘ä»¬åˆ©ç”¨ `transform:translate(-50%,-50%)` ï¼Œå°†åŠ¨ç”»çš„åŸºç‚¹è®¾ä¸ºå·¦ä¸Šè§’

> transform-originï¼šè®¾ç½®åŠ¨ç”»çš„åŸºç‚¹(ä¸­å¿ƒç‚¹)ï¼Œé»˜è®¤ç‚¹æ˜¯å…ƒç´ çš„ä¸­å¿ƒç‚¹

è¯­æ³•

> transform-origin: x-axis y-axis z-axis;

ç„¶ååˆ©ç”¨`transform:translate(-50%,-50%)`ï¼Œå°†å›¾è¡¨æ²¿ xï¼Œy è½´ç§»åŠ¨ 50%

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa9186723c634d468d376040c197de4b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

æ¥ä¸‹æ¥åˆ©ç”¨`ç»å¯¹å®šä½`å°†å›¾è¡¨å®šä½åˆ°ä¸­é—´ä½ç½®

```css
position: absolute;
left: 50%;
top: 50%;
```

#### å·æ‡’æ–¹æ³•-æ’ä»¶

`v-scale-screen`æ˜¯ä½¿ç”¨ css å±æ€§ transform å®ç°ç¼©æ”¾æ•ˆæœçš„ä¸€ä¸ªå¤§å±è‡ªé€‚åº”ç»„ä»¶ï¼Œé€šè¿‡ scale è¿›è¡Œç­‰æ¯”ä¾‹è®¡ç®—ï¼Œè¾¾åˆ°ç­‰æ¯”ä¾‹ç¼©æ”¾çš„æ•ˆæœï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒé“ºæ»¡å…¨å±ï¼Œå®½åº¦ç­‰æ¯”ï¼Œé«˜åº¦ç­‰æ¯”ï¼Œç­‰è‡ªé€‚åº”æ–¹æ¡ˆ,å…·ä½“å¯æŸ¥[å¤§å±è‡ªé€‚åº”ç»ˆæè§£å†³æ–¹æ¡ˆ](https://juejin.cn/post/7075253747567296548 "https://juejin.cn/post/7075253747567296548")

### æ–¹æ¡ˆä¸‰ï¼šrem + vw wh

#### ä¸Šæ•ˆæœ

![rem.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a517572ce85c40c882394db74a7b5ef8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹åˆšå¥½æ˜¯ 16:9 æ—¶ï¼Œé¡µé¢èƒ½åˆšå¥½å…¨å±å±•ç¤ºï¼Œå†…å®¹å æ»¡æ˜¾ç¤ºå™¨

![rem01.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591f96cb9a2a44379892e9a91842c8eb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•çš„å°ºå¯¸æ¯”ä¾‹å°äº 16:9 æ—¶ï¼Œé¡µé¢ä¸Šä¸‹ç•™ç™½ï¼Œå·¦å³å æ»¡å¹¶ä¸Šä¸‹å±…ä¸­ï¼Œæ˜¾ç¤ºæ¯”ä¾‹ä¿æŒ 16:9

![rem02.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/403500447e734a44be43af9da0809428~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

å½“å±å¹•å°ºå¯¸æ¯”ä¾‹å¤§äº 16:9 æ—¶ï¼Œé¡µé¢å·¦å³ç•™ç™½ï¼Œä¸Šä¸‹å æ»¡å¹¶å±…ä¸­ï¼Œæ˜¾ç¤ºæ¯”ä¾‹ä¿æŒ 16:9

![rem03.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11f4908f68fb49ada3597d3d07161a32~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

#### å®ç°æ€è·¯

**å…³äº rem**  
`rem(font size of the root element)`ï¼Œæ˜¯ css3 ä¸­æ–°å¢çš„ä¸€ä¸ªå¤§å°å•ä½ï¼Œå³ç›¸å¯¹äºæ ¹å…ƒç´  font-size å€¼çš„å¤§å°ã€‚  
**è‡ªé€‚åº”æ€è·¯**  
åŠ¨æ€çš„è®¡ç®—å‡ºé¡µé¢çš„ fontsize ä»è€Œæ”¹å˜ rem çš„å¤§å°ã€‚

1. æ‹¿ 1920 \* 1080 çš„æ ‡å‡†å±å¹•å¤§å°ä¸ºä¾‹ï¼Œå°†å±å¹•åˆ†ä¸º`10`ä»½ï¼Œå…ˆè®¡ç®—`rem çš„åŸºå‡†å€¼:` 1920 / 10 = 192ï¼›
2. æŠŠæ‰€æœ‰å…ƒç´ çš„é•¿ã€å®½ã€ä½ç½®ã€å­—ä½“å¤§å°ç­‰åŸæ¥çš„ px å•ä½å…¨éƒ¨è½¬æ¢æˆ remï¼›
3. ç½‘é¡µåŠ è½½åï¼Œç”¨ js å»è®¡ç®—å½“å‰æµè§ˆå™¨çš„å®½åº¦ï¼Œå¹¶è®¾ç½® html çš„ font-size ä¸º (`å½“å‰æµè§ˆå™¨çª—å£å®½åº¦ / 10`) ã€‚  
    è¿™æ ·çš„è¯ 10rem å°±åˆšå¥½ç­‰äºæµè§ˆå™¨çª—å£çš„å®½åº¦ï¼Œä¹Ÿå°±å¯ä»¥ä¿è¯ 100% å®½åº¦ï¼Œç­‰æ¯”ä¾‹ç¼©æ”¾è®¾è®¡ç¨¿çš„é¡µé¢äº†ã€‚ ![rem01.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591f96cb9a2a44379892e9a91842c8eb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?)

**å› æ­¤ rem + vm vh æ–¹æ¡ˆè¦è§£å†³ä¸‰ä»¶äº‹**

1. è·å¾— rem çš„åŸºå‡†å€¼ï¼›
2. é¡µé¢å†…å†™ä¸€æ®µ js ä»£ç ï¼ŒåŠ¨æ€çš„è®¡ç®—`htmlæ ¹å…ƒç´ çš„font-size`ï¼›
3. å±å¹•å˜åŒ–åï¼Œå›¾è¡¨è‡ªåŠ¨è°ƒæ•´å’Œå›¾è¡¨å­—ä½“ã€é—´è·ã€ä½ç§»ç­‰çš„è‡ªé€‚åº”ã€‚

#### å®ç°æ–¹æ¡ˆ

**ç¬¬ä¸€ç‚¹ï¼šè·å¾— rem çš„åŸºå‡†å€¼**

1. é¦–å…ˆå®‰è£…Â `@njleonzhang/postcss-px-to-rem`Â è¿™ä¸ªåŒ…

```
npm i @njleonzhang/postcss-px-to-rem -D

```

2. åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º`.postcssrc.js`é…ç½®æ–‡ä»¶

```js
module.exports = {
 Â plugins: {
 Â  Â autoprefixer: {},
 Â  Â "@njleonzhang/postcss-px-to-rem": {
 Â  Â  Â unitToConvert: 'px', // (String) è¦è½¬æ¢çš„å•ä½ï¼Œé»˜è®¤æ˜¯ pxã€‚
 Â  Â  Â widthOfDesignLayout: 1920, // (Number) è®¾è®¡å¸ƒå±€çš„å®½åº¦ã€‚å¯¹äºpcä»ªè¡¨ç›˜ï¼Œä¸€èˆ¬æ˜¯ 1920.
 Â  Â  Â unitPrecision: 3, // (Number) å…è®¸ rem å•ä½å¢é•¿åˆ°çš„åè¿›åˆ¶æ•°å­—.
 Â  Â  Â selectorBlackList: ['.ignore', '.hairlines'], // (Array) è¦å¿½ç•¥å¹¶ä¿ç•™ä¸º px çš„é€‰æ‹©å™¨.
 Â  Â  Â minPixelValue: 1, // (Number) è®¾ç½®è¦æ›¿æ¢çš„æœ€å°åƒç´ å€¼.
 Â  Â  Â mediaQuery: false // (Boolean) å…è®¸åœ¨åª’ä½“æŸ¥è¯¢ä¸­è½¬æ¢ px.
 Â   }
  }
}

```

3. é…ç½®å®Œæˆåï¼Œé¡µé¢å†…çš„ px å°±ä¼šè¢«è½¬æ¢æˆ rem äº†

**ç¬¬äºŒç‚¹ï¼šåŠ¨æ€çš„è®¡ç®—`htmlæ ¹å…ƒç´ çš„font-size`**

1. åœ¨å·¥å…·å‡½æ•°æ–‡ä»¶ä¸­æ–°å»ºä¸€ä¸ª rem.js æ–‡ä»¶ï¼Œç”¨äºåŠ¨æ€è®¡ç®— font-size

```js
(function init(screenRatioByDesign = 16 / 9) {
 Â let docEle = document.documentElement
 Â function setHtmlFontSize() {
 Â  Â var screenRatio = docEle.clientWidth / docEle.clientHeight;
 Â  Â var fontSize = (
 Â  Â  Â screenRatio > screenRatioByDesign
 Â  Â  Â  Â ? (screenRatioByDesign / screenRatio)
 Â  Â  Â   : 1
 Â   ) * docEle.clientWidth / 10;
 Â  Â docEle.style.fontSize = fontSize.toFixed(3) + "px";
 Â  Â console.log(docEle.style.fontSize);
  }
 Â setHtmlFontSize()
 Â window.addEventListener('resize', setHtmlFontSize)
})()

```

2. åœ¨å…¥å£æ–‡ä»¶ main.js ä¸­å¼•å…¥ rem.js æ–‡ä»¶

```
import './utils/rem.js';

```

è‡³æ­¤ï¼Œé¡µé¢å°±å·²ç»å¯ä»¥å®ç° 16:9 è‡ªé€‚åº”äº†ã€‚

**ç¬¬ä¸‰ç‚¹ï¼šå±å¹•å˜åŒ–ï¼Œå›¾è¡¨è‡ªé€‚åº”**  
å±å¹•å˜åŒ–åï¼Œå›¾è¡¨è‡ªåŠ¨è°ƒæ•´å­—ä½“ã€é—´è·ã€ä½ç§»ç­‰ï¼Œæ­¤å¤„å‚è€ƒä¸Šé¢ vm vh çš„å®ç°æ–¹å¼å³å¯ï¼Œåœ¨æ­¤å°±ä¸é‡å¤èµ˜è¿°äº†

### å‚è€ƒèµ„æ–™

* æ¨èä¸€ä¸ªecharts çš„æ¡ˆåˆ—ç½‘ç«™ï¼Œéœ€è¦ä»€ä¹ˆç›´æ¥å›¾è¡¨ç›´æ¥åœ¨ä¸Šé¢å»æ‰¾ï¼Œå¯ä»¥çœå»å¾ˆå¤šæŸ¥ echarts é…ç½®çš„æ—¶é—´  
    [å…¨ç½‘echartsæ¡ˆä¾‹èµ„æºå¤§æ€»ç»“å’Œechartsçš„é«˜æ•ˆä½¿ç”¨æŠ€å·§ï¼ˆç»†èŠ‚ç‰ˆï¼‰](https://juejin.cn/post/7078834647005822983 "https://juejin.cn/post/7078834647005822983")

* scale æ–¹æ¡ˆå‚è€ƒï¼š [æ•°æ®å¤§å±æœ€ç®€å•è‡ªé€‚åº”æ–¹æ¡ˆï¼Œæ— éœ€é€‚é…remå•ä½](https://juejin.cn/post/7148733509744459790 "https://juejin.cn/post/7148733509744459790")

* vm vh æ–¹æ¡ˆå‚è€ƒï¼š [Vue+Echartsä¼ä¸šçº§å¤§å±é¡¹ç›®é€‚é…æ–¹æ¡ˆ](https://juejin.cn/post/7009081081760579591#heading-31 "https://juejin.cn/post/7009081081760579591#heading-31")

* rem æ–¹æ¡ˆå‚è€ƒï¼š[æ•°æ®å¤§å±remé€‚é…æ–¹æ¡ˆ](https://juejin.cn/post/7035930041498206216#heading-0 "https://juejin.cn/post/7035930041498206216#heading-0")
